generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum Tipo {
  PDE
  COTA
}

enum StatusPagamento {
  EM_PAGAMENTO
  QUITADO
  QUEBRA
}

model Usuario {
  id             String         @id @default(uuid())
  nome           String
  login          String         @unique
  email          String         @unique
  permissao      Permissao      @default(USR)
  status         Boolean        @default(true)
  avatar         String?

  criado_em      DateTime       @default(now())
  alterado_em    DateTime       @default(now()) @updatedAt

  @@map("usuarios")
}

model Processo {
  id                    String          @id @default(uuid())
  tipo                  Tipo?
  codigo                String?
  num_processo          String          @unique
  protocolo_ad          String?
  cpf_cnpj              String?
  data_entrada          DateTime?       @db.Date
  status_pagamento      StatusPagamento @default(EM_PAGAMENTO)
  // unidade_licenciamento UnidadesLicenciamento?
  // valor_total_outorga   Float?

  parcelas       Parcela[]

  @@map("processos")
}

model Parcela {
  id              String         @id @default(uuid())
  num_parcela     Int
  valor           Float
  vencimento      DateTime       @db.Date
  data_quitacao   DateTime?      @db.Date
  ano_pagamento   Int?
  status_quitacao Boolean        @default(false)
  // anoEmissaoGuia  Int?
  // codSiglaUnidade String? SEL
  // codTipoServico  Int?
  // numGuia         Int?

  processo_id     String
  processo        Processo       @relation(fields: [processo_id], references: [id])

  @@map("parcelas")
}

enum UnidadesLicenciamento {
  RESID
  COMIN
}

enum Permissao {
  DEV
  SUP
  ADM
  USR
}